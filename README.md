# NHM-Assist
NHM-Assist is a collection of python workflows presented in Jupyter notebooks for evaluating, running and interpreting [National Hydrologic Model (NHM)](https://www.sciencebase.gov/catalog/item/626c0d67d34e76103cd2ce4a) domains using [pywatershed](https://github.com/EC-USGS/pywatershed). NHM-Assist allows users to:
- evaluate hydrofabric element connections such as hydrologic response unit connections to streamflow segments, segment routing order, and gage placement accuracy;
- display NHM domain parameter values on interactive maps and plots;
- run the NHM domain using pywatershed and create output for chosen variables;
- display NHM domain output values, such as recharge or actual evapotranspiration, on interactive maps and plots; and
- display simulated and observed streamflow for model gages on interactive plots.

Select interactive maps and plots generated by NHM-Assist are saved locally in .html format and displayed in a web browser.

## Install conda-forge miniforge on your PC
Instructions for standard installation of conda-forge miniforge is available at this [link](https://github.com/conda-forge/miniforge)
For USGS users, it is recommended to check with your IT department for guidance.

## Clone the NHM-Assist repository to a project folder
This repository is designed to be placed in a project folder, but it is not necessary. Navigate to the desired location 
in the miniforge prompt and then type: 

`git clone https://code.usgs.gov/wma/hytest/nhm-assist.git`

## Build the environment
Open a miniforge prompt.

If the `nhm` environment already exists, then remove it: 

`conda remove -y --name nhm --all`

Install a fresh env:

`conda env create -f environment.yaml`

## Retrieve example NHM domain data
In the miniforge prompt, navigate to the NHM-Assist folder, and run 

`python pull_domain.py --name=willamette_river` 

This will create a domain_data folder and add the example/sample domain for the Willamette River watershed.

## Activate the environment:
In the miniforge prompt, navigate to the NHM-Assist folder, and run 

`activate nhm`

## Launch Jupyter
In the miniforge prompt, navigate to the NHM-Assist folder, and run
 
`jupyter lab`

Ready to go! :+1:

## Citation
Haj, A.E., Barker, M.I., Norton, P.A., McCreight, J.L., and Ludden, L.L., 2025, NHM-Assist: a collection of python workflows presented in Jupyter notebooks for evaluating, running and interpreting National Hydrologic Model (NHM) domains, version 1.0.0: U.S. Geological Survey software release, https://doi.org/10.5066/P1NMW6US.
